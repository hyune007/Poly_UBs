<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>T·∫°o m·∫≠t kh·∫©u m·ªõi - Tech Store</title>
    <link rel="stylesheet" href="/css/general.css">
    <link rel="stylesheet" href="/css/auth/reset-password.css">
</head>
<body>

<!-- üß† N·ªÅn m·∫°ch ƒëi·ªán t·ª≠ -->
<div class="circuit-background"></div>

<!-- ‚òÅÔ∏è Sinh nhi·ªÅu m√¢y -->
<script>
    function createCloud(top, size, duration, opacity) {
        const cloud = document.createElement("div");
        cloud.classList.add("cloud");
        cloud.style.top = top + "%";
        cloud.style.left = -size + "px";
        cloud.style.width = size + "px";
        cloud.style.height = size / 3 + "px";
        cloud.style.opacity = opacity;
        cloud.style.animationDuration = duration + "s";
        document.body.appendChild(cloud);
    }

    for (let i = 0; i < 10; i++) {
        createCloud(
            Math.random() * 70,
            150 + Math.random() * 250,
            60 + Math.random() * 50,
            0.3 + Math.random() * 0.4
        );
    }
</script>

<!-- üåê Icon c√¥ng ngh·ªá -->
<img src="https://cdn-icons-png.flaticon.com/512/888/888879.png" class="tech-icon" style="top:10%; left:5%;">
<img src="https://cdn-icons-png.flaticon.com/512/1006/1006363.png" class="tech-icon" style="bottom:15%; right:10%;">
<img src="https://cdn-icons-png.flaticon.com/512/4248/4248443.png" class="tech-icon" style="top:20%; right:15%;">
<img src="https://cdn-icons-png.flaticon.com/512/6062/6062646.png" class="tech-icon" style="bottom:10%; left:15%;">


<!-- üíß Form t·∫°o m·∫≠t kh·∫©u m·ªõi -->
<div class="reset-container">
    <h2>T·∫°o m·∫≠t kh·∫©u m·ªõi</h2>
    <p class="description">Nh·∫≠p m·∫≠t kh·∫©u m·ªõi c·ªßa b·∫°n b√™n d∆∞·ªõi. Link n√†y c√≥ hi·ªáu l·ª±c trong 5 ph√∫t.</p>

    <!-- Hi·ªÉn th·ªã th√¥ng b√°o l·ªói -->
    <div th:if="${error}" class="alert alert-error" style="background-color: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; margin-bottom: 15px; border: 1px solid #f5c6cb;">
        <span th:text="${error}"></span>
    </div>

    <form action="/reset-password-post" method="post" id="resetForm">
        <input type="hidden" name="token" th:value="${token}">
        <input type="password" name="newPassword" id="newPassword" placeholder="M·∫≠t kh·∫©u m·ªõi (t·ªëi thi·ªÉu 6 k√Ω t·ª±)" required minlength="6">
        <input type="password" name="confirmPassword" id="confirmPassword" placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u" required>
        <button class="btn" type="submit">X√°c nh·∫≠n</button>
    </form>

    <div class="options">
        <p>Quay l·∫°i <a href="/login">ƒêƒÉng nh·∫≠p</a></p>
    </div>
</div>

<!-- ‚ú® ƒê·ªëm tr·∫Øng theo chu·ªôt -->
<script>
    document.addEventListener("mousemove", (e) => {
        for (let i = 0; i < 3; i++) {
            const particle = document.createElement("div");
            particle.classList.add("particle");

            const x = e.pageX + (Math.random() * 20 - 10);
            const y = e.pageY + (Math.random() * 20 - 10);

            particle.style.left = x + "px";
            particle.style.top = y + "px";

            const size = Math.random() * 8 + 4;
            particle.style.width = size + "px";
            particle.style.height = size + "px";

            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 2000);
        }
    });

    // üß† Ki·ªÉm tra 2 m·∫≠t kh·∫©u c√≥ tr√πng nhau kh√¥ng
    document.getElementById("resetForm").addEventListener("submit", function(e) {
        const newPass = document.getElementById("newPassword").value;
        const confirmPass = document.getElementById("confirmPassword").value;

        if (newPass !== confirmPass) {
            e.preventDefault();
            alert("‚ö†Ô∏è M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp. Vui l√≤ng nh·∫≠p l·∫°i!");
            return false;
        }

        if (newPass.length < 6) {
            e.preventDefault();
            alert("‚ö†Ô∏è M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±!");
            return false;
        }
    });
</script>

</body>
</html>
