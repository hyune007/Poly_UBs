<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Qu·∫£n l√Ω s·∫£n ph·∫©m</title>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html, body { height: 100%; }
        body { display: flex; flex-direction: column; }
        main { flex: 1; }
        .page-link { min-width: 40px; text-align: center; }
    </style>
</head>
<body class="bg-gray-100">

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand text-xl font-bold" href="#">Admin Panel</a>
    </div>
</nav>

<main class="container mt-5">

    <!-- Tabs ph√¢n lo·∫°i -->
    <ul class="nav nav-tabs mb-4">
        <li class="nav-item">
            <a class="nav-link" th:classappend="${category == 'phone'} ? 'active'" th:href="@{/admin/products(category='phone')}">üì± ƒêi·ªán tho·∫°i</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:classappend="${category == 'laptop'} ? 'active'" th:href="@{/admin/products(category='laptop')}">üíª Laptop</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:classappend="${category == 'ipad'} ? 'active'" th:href="@{/admin/products(category='ipad')}">üì≤ iPad</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:classappend="${category == 'tablet'} ? 'active'" th:href="@{/admin/products(category='tablet')}">üß≠ M√°y t√≠nh b·∫£ng</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:classappend="${category == 'accessory'} ? 'active'" th:href="@{/admin/products(category='accessory')}">üéß Ph·ª• ki·ªán</a>
        </li>
    </ul>

    <!-- Ti√™u ƒë·ªÅ + n√∫t th√™m -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-2xl font-semibold" th:text="'Danh s√°ch - ' + ${categoryDisplay}"></h2>
        <a th:href="@{/admin/products/create(category=${param.category})}"
           class="btn btn-primary">
            Th√™m s·∫£n ph·∫©m
        </a>

    </div>

    <!-- B·∫£ng s·∫£n ph·∫©m -->
    <div class="table-responsive shadow rounded overflow-hidden">
        <table class="table table-hover align-middle bg-white">
            <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>T√™n</th>
                <th>H√£ng</th>
                <th>Gi√°</th>
                <th>·∫¢nh</th>
                <th class="text-center">H√†nh ƒë·ªông</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="p : ${products}">
                <td th:text="${p.id}"></td>
                <td th:text="${p.name}"></td>
                <td th:text="${p.brand}"></td>
                <td>
                    <span th:text="${#numbers.formatDecimal(p.price, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></span>
                </td>
                <td>
                    <img th:src="${p.imageUrl}" alt="·∫¢nh" class="rounded" style="width:80px; height:auto;">
                </td>
                <td class="text-center">
                    <a th:href="@{'/admin/products/edit/' + ${p.id} + '(category=' + ${category} + ')'}" class="btn btn-sm btn-warning me-1">
                        ‚úèÔ∏è S·ª≠a
                    </a>
                    <a th:href="@{'/admin/products/delete/' + ${p.id} + '(category=' + ${category} + ')'}"
                       onclick="return confirm('X√≥a s·∫£n ph·∫©m n√†y?')"
                       class="btn btn-sm btn-danger">
                        üóëÔ∏è X√≥a
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Ph√¢n trang -->
    <nav th:if="${totalPages > 1}" class="mt-4">
        <ul class="pagination justify-content-center gap-1">
            <li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">
                <a class="page-link" th:href="@{/admin/products(category=${category}, page=${currentPage - 1})}">¬´</a>
            </li>

            <li class="page-item" th:each="i : ${#numbers.sequence(1, totalPages)}"
                th:classappend="${i == currentPage} ? 'active'">
                <a class="page-link" th:text="${i}"
                   th:href="@{/admin/products(category=${category}, page=${i})}"></a>
            </li>

            <li class="page-item" th:classappend="${currentPage == totalPages} ? 'disabled'">
                <a class="page-link" th:href="@{/admin/products(category=${category}, page=${currentPage + 1})}">¬ª</a>
            </li>
        </ul>
    </nav>

</main>

<footer class="bg-dark text-white text-center py-3 mt-auto">
    ¬© 2025 Tech Store Admin Panel
</footer>

</body>
</html>
